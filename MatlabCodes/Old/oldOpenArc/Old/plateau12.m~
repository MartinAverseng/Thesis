function [ out ] = plateau12(x)

Nquad = 9;
q = NumericalQuadrature(Nquad);
q2 = 
uhat = q.xhat;
what = q.what;
normalize = sum(exp(-1./((uhat).*(1-uhat))).*what);



uhat = uhat(:)';
x = x(:);
Mx = length(x);
X = repmat(x,1,Nquad);
U = repmat(uhat,Mx,1);

ARG = X + (2-X).*U;
out = 0*x;
out(x>=2) = 0;
out(x<=1) = 1;
idx = and(x>1,x<2);
out(idx) = (2-x(idx)).*(phi(ARG(idx,:))*what)/normalize;


    function[res] = phi(x)
        res = 0*x;
        res(x<=1) = 0;
        res(x>=2) = 0;
        id = and(x>1,x<2);
        res(id) = exp(-1./((x(id)-1).*(2-x(id))));
    end


end

